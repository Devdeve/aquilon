--
-- Dump the schema of an Oracle database
--
set heading off;
set echo off;
set pages 0;
set long 100000;
set longchunksize 10000;
set trimspool on;
set tab off;
set linesize 32767;

clear breaks;

EXEC DBMS_METADATA.SET_TRANSFORM_PARAM(DBMS_METADATA.SESSION_TRANSFORM, 'PRETTY', TRUE);

EXEC DBMS_METADATA.SET_TRANSFORM_PARAM(DBMS_METADATA.SESSION_TRANSFORM, 'SEGMENT_ATTRIBUTES', FALSE);
EXEC DBMS_METADATA.SET_TRANSFORM_PARAM(DBMS_METADATA.SESSION_TRANSFORM, 'STORAGE', FALSE);
EXEC DBMS_METADATA.SET_TRANSFORM_PARAM(DBMS_METADATA.SESSION_TRANSFORM, 'TABLESPACE', TRUE);

SELECT DBMS_METADATA.GET_DDL('TABLE',u.table_name) FROM USER_TABLES u ORDER BY u.table_name;
SELECT DBMS_METADATA.GET_DDL('INDEX',u.index_name) FROM USER_INDEXES u ORDER BY u.index_name;

quit;
